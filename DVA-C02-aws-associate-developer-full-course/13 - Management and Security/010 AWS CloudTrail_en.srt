1
00:00:05,830 --> 00:00:12,670
As CloudTrail is a service that you can use for capturing information about the API actions that are

2
00:00:12,670 --> 00:00:19,990
happening in your AWS account. So, as you know, whenever you do anything in AWS like launch an EC2

3
00:00:19,990 --> 00:00:26,590
instance or create a Lambda function or modify a resource, every single time you do that, you're

4
00:00:26,590 --> 00:00:28,660
generating an API action.

5
00:00:29,050 --> 00:00:34,960
Now, it doesn't matter whether you're using the management console, the CLI, the API, or the SDK.

6
00:00:35,230 --> 00:00:41,590
Whichever way you're doing it, you're always generating an API action. And lots of that information

7
00:00:41,590 --> 00:00:43,480
related to that API

8
00:00:43,480 --> 00:00:48,730
action can be logged by CloudTrail so you can monitor it for auditing purposes.

9
00:00:49,030 --> 00:00:54,490
So, CloudTrail logs API activity and the principal use case for that is auditing.

10
00:00:54,670 --> 00:01:00,130
It gives you a chance to understand who did what and when and on what resources.

11
00:01:00,490 --> 00:01:04,780
By default, management events are logged and retained for 90 days.

12
00:01:05,200 --> 00:01:07,150
Now, that might be insufficient for you.

13
00:01:07,420 --> 00:01:13,870
So, what you can do is create what's called a CloudTrail trail, and then you can log events to S3 for

14
00:01:13,870 --> 00:01:15,130
indefinite retention.

15
00:01:15,490 --> 00:01:20,920
Each trail that you create can be within a region or it can be applied to all regions.

16
00:01:21,550 --> 00:01:29,200
We can even use CloudWatch events to trigger actions based on API calls that are made and logged in

17
00:01:29,200 --> 00:01:29,950
CloudTrail.

18
00:01:30,250 --> 00:01:32,800
And we'll see that in the hands-on in this section.

19
00:01:33,040 --> 00:01:38,380
Events can also be streamed to CloudWatch logs as well, so that's another place that you can record

20
00:01:38,380 --> 00:01:38,620
them.

21
00:01:38,920 --> 00:01:45,010
Typically, they go to Amazon S3 and then you can additionally log them to CloudWatch logs as well.

22
00:01:45,310 --> 00:01:49,600
And that might be useful if you want to do things like use metric filters,

23
00:01:49,810 --> 00:01:52,540
subscription filters, or logs insights.

24
00:01:52,930 --> 00:01:58,540
So, we have AWS CloudTrail. And it's going to log API actions for 90 days by default.

25
00:01:58,780 --> 00:02:04,240
We can then choose to create a trail and log our events to Amazon S3 and then they're retained

26
00:02:04,240 --> 00:02:05,080
indefinitely.

27
00:02:05,650 --> 00:02:10,300
We can also enable something called log file integrity validation.

28
00:02:10,780 --> 00:02:17,590
What this does is it checks whether the events that are being logged have been tampered with. Because

29
00:02:17,590 --> 00:02:20,600
this information is used for auditing and compliance,

30
00:02:20,860 --> 00:02:25,540
we need to be sure that the information is accurate and has not been modified.

31
00:02:26,080 --> 00:02:31,900
Using CloudTrail, we can trigger notifications through SNS topics when CloudTrail publishes log

32
00:02:31,900 --> 00:02:32,320
files.

33
00:02:33,130 --> 00:02:39,880
We can also forward our data to CloudWatch logs and then through logs we might do things like use alarms

34
00:02:40,270 --> 00:02:46,630
or subscription filters. Our alarms might trigger Lambda functions or SNS topics, and then we might

35
00:02:46,630 --> 00:02:49,540
want to process that information in CloudWatch Logs.

36
00:02:50,050 --> 00:02:55,750
We can also forward information to CloudWatch Events and then we might want to trigger a Lambda function

37
00:02:55,750 --> 00:02:56,230
that way.

38
00:02:56,590 --> 00:02:59,380
And remember, this is all based on API actions.

39
00:02:59,650 --> 00:03:06,850
So when an API event occurs, we're then responding to that, logging that information, perhaps generating

40
00:03:06,850 --> 00:03:07,780
some kind of event

41
00:03:07,790 --> 00:03:13,450
so we have an automated action, or forwarding the data to CloudWatch Logs so that we can process it

42
00:03:13,720 --> 00:03:16,030
or create alarms based on that information.

43
00:03:16,390 --> 00:03:20,920
So there's lots of ways that we can use the information that's generated by CloudTrail.

44
00:03:21,340 --> 00:03:23,470
Now there are a few different types of events.

45
00:03:23,950 --> 00:03:25,780
Firstly, we have management events.

46
00:03:26,110 --> 00:03:31,150
These provide information about the management operations that you perform on your resources.

47
00:03:31,540 --> 00:03:37,120
So, if you launch an EC2 instance or terminate an instance or create a database or create a Lambda

48
00:03:37,120 --> 00:03:40,150
function, all of these are management operations.

49
00:03:40,510 --> 00:03:47,020
And when you enable management events, the information about who generated the API action, at

50
00:03:47,020 --> 00:03:51,850
what time, and on what resource will all be logged into the CloudTrail logs.

51
00:03:52,180 --> 00:03:53,650
Next, we have data events.

52
00:03:54,130 --> 00:04:00,880
These provide more detailed information about the resource operations performed on or in a resource.

53
00:04:01,210 --> 00:04:04,480
And there's a few different types of service that we can use here.

54
00:04:04,690 --> 00:04:07,750
I'll show you in the console so you get a better idea of that shortly.

55
00:04:08,020 --> 00:04:09,520
But S3 is one example.

56
00:04:09,850 --> 00:04:15,310
So, you can get more detailed information about what's happening within Amazon S3 if you enable data

57
00:04:15,310 --> 00:04:15,730
events.

58
00:04:16,510 --> 00:04:18,250
And then we have insights events.

59
00:04:18,250 --> 00:04:20,089
These are relatively new. Here

60
00:04:20,110 --> 00:04:26,830
you can identify and respond to any unusual activity that's taking place in your account that's associated

61
00:04:26,830 --> 00:04:28,450
with write API calls.

62
00:04:28,630 --> 00:04:29,800
So that's the core theory.

63
00:04:29,800 --> 00:04:33,790
And in the next lesson, we're going to go into CloudTrail and create our first trail.

